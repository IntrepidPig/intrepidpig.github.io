(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{6727:function(e,t,n){"use strict";e.exports=n.p+"static/media/riscui_wasm_lib_bg.aba7e72d.wasm"},8523:function(e,t,n){Promise.resolve().then(n.bind(n,337))},337:function(e,t,n){"use strict";let r;n.r(t),n.d(t,{default:function(){return T}});var i,a,s=n(9268),o=n(6006),c=n(5205);let l=Array(128).fill(void 0);l.push(void 0,null,!0,!1);let u=l.length;function _(e){let t=l[e];return e<132||(l[e]=u,u=e),t}function d(e){u===l.length&&l.push(l.length+1);let t=u;return u=l[t],l[t]=e,t}let f="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&f.decode();let g=null;function w(){return(null===g||0===g.byteLength)&&(g=new Uint8Array(r.memory.buffer)),g}function h(e,t){return e>>>=0,f.decode(w().subarray(e,e+t))}let b=0,m="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},x="function"==typeof m.encodeInto?function(e,t){return m.encodeInto(e,t)}:function(e,t){let n=m.encode(e);return t.set(n),{read:e.length,written:n.length}};function p(e,t,n){if(void 0===n){let n=m.encode(e),r=t(n.length,1)>>>0;return w().subarray(r,r+n.length).set(n),b=n.length,r}let r=e.length,i=t(r,1)>>>0,a=w(),s=0;for(;s<r;s++){let t=e.charCodeAt(s);if(t>127)break;a[i+s]=t}if(s!==r){0!==s&&(e=e.slice(s)),i=n(i,r,r=s+3*e.length,1)>>>0;let t=w().subarray(i+s,i+r),a=x(e,t);s+=a.written}return b=s,i}let y=null;function j(){return(null===y||0===y.byteLength)&&(y=new Int32Array(r.memory.buffer)),y}class v{static __wrap(e){e>>>=0;let t=Object.create(v.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();r.__wbg_execresult_free(e)}get a0(){let e=r.__wbg_get_execresult_a0(this.__wbg_ptr);return e}set a0(e){r.__wbg_set_execresult_a0(this.__wbg_ptr,e)}get a1(){let e=r.__wbg_get_execresult_a1(this.__wbg_ptr);return e}set a1(e){r.__wbg_set_execresult_a1(this.__wbg_ptr,e)}}class k{static __wrap(e){e>>>=0;let t=Object.create(k.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();r.__wbg_machine_free(e)}static new(e){let t=r.machine_new(e);return k.__wrap(t)}get_instruction_index(){let e=r.machine_get_instruction_index(this.__wbg_ptr);return e>>>0}get_registers(){try{let a=r.__wbindgen_add_to_stack_pointer(-16);r.machine_get_registers(a,this.__wbg_ptr);var e,t=j()[a/4+0],n=j()[a/4+1],i=(e=t>>>0,j().subarray(e/4,e/4+n)).slice();return r.__wbindgen_free(t,4*n),i}finally{r.__wbindgen_add_to_stack_pointer(16)}}get_memory_view(e,t){try{let o=r.__wbindgen_add_to_stack_pointer(-16);r.machine_get_memory_view(o,this.__wbg_ptr,e,t);var n,i=j()[o/4+0],a=j()[o/4+1],s=(n=i>>>0,w().subarray(n/1,n/1+a)).slice();return r.__wbindgen_free(i,1*a),s}finally{r.__wbindgen_add_to_stack_pointer(16)}}exec(e){let t=r.machine_exec(this.__wbg_ptr,e);return 0===t?void 0:v.__wrap(t)}}async function S(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"!=e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}async function N(e){if(void 0!==r)return r;void 0===e&&(e=new n.U(n(6727)));let t=function(){let e={};return e.wbg={},e.wbg.__wbindgen_object_drop_ref=function(e){_(e)},e.wbg.__wbg_wasmprint_7279bc0587b85d8d=function(e,t){console.log(h(e,t))},e.wbg.__wbindgen_object_clone_ref=function(e){let t=l[e];return d(t)},e.wbg.__wbindgen_number_new=function(e){return d(e)},e.wbg.__wbindgen_string_new=function(e,t){let n=h(e,t);return d(n)},e.wbg.__wbg_set_841ac57cff3d672b=function(e,t,n){l[e][_(t)]=_(n)},e.wbg.__wbg_new_898a68150f225f2e=function(){return d([])},e.wbg.__wbg_new_b51585de1b234aff=function(){return d({})},e.wbg.__wbg_set_502d29070ea18557=function(e,t,n){l[e][t>>>0]=_(n)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){let e=Error();return d(e)},e.wbg.__wbg_stack_658279fe44541cf6=function(e,t){let n=l[t].stack,i=p(n,r.__wbindgen_malloc,r.__wbindgen_realloc),a=b;j()[e/4+1]=a,j()[e/4+0]=i},e.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let n,i;try{n=e,i=t,console.error(h(e,t))}finally{r.__wbindgen_free(n,i,1)}},e.wbg.__wbindgen_debug_string=function(e,t){let n=function e(t){let n;let r=typeof t;if("number"==r||"boolean"==r||null==t)return"".concat(t);if("string"==r)return'"'.concat(t,'"');if("symbol"==r){let e=t.description;return null==e?"Symbol":"Symbol(".concat(e,")")}if("function"==r){let e=t.name;return"string"==typeof e&&e.length>0?"Function(".concat(e,")"):"Function"}if(Array.isArray(t)){let n=t.length,r="[";n>0&&(r+=e(t[0]));for(let i=1;i<n;i++)r+=", "+e(t[i]);return r+"]"}let i=/\[object ([^\]]+)\]/.exec(toString.call(t));if(!(i.length>1))return toString.call(t);if("Object"==(n=i[1]))try{return"Object("+JSON.stringify(t)+")"}catch(e){return"Object"}return t instanceof Error?"".concat(t.name,": ").concat(t.message,"\n").concat(t.stack):n}(l[t]),i=p(n,r.__wbindgen_malloc,r.__wbindgen_realloc),a=b;j()[e/4+1]=a,j()[e/4+0]=i},e.wbg.__wbindgen_throw=function(e,t){throw Error(h(e,t))},e}();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:i,module:a}=await S(await e,t);return r=i.exports,N.__wbindgen_wasm_module=a,y=null,g=null,r}function A(e){let t=(0,o.useContext)(e);if(null===t)throw Error("Context has not been provided");return t}function C(){return(0,o.createContext)(null)}function E(e){let[t,n]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{(async()=>{await N(),n(!0)})()}),t)?e.children:(0,s.jsx)("p",{children:"Loading WASM"})}function I(e){let[t,n]=(0,c.C)(O,null,t=>(function(e){let t=function(e){let t=p(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=b,i=r.compile(t,n);return _(i)}(e),n=new Uint32Array(t.length),i=[];for(let e=0;e<t.length;e++)n[e]=t[e].code,i.push(t[e].text);let a=k.new(1048576);return{machine:a,instructions:n,instructionTexts:i,activeIndex:0,registers:a.get_registers(),memoryViewStart:0,memoryViewLen:4096,memoryView:a.get_memory_view(0,4096).buffer,output:""}})(e.source));return(0,s.jsx)(U.Provider,{value:t,children:(0,s.jsx)(V.Provider,{value:n,children:e.children})})}function O(e,t){function n(){e.activeIndex=e.machine.get_instruction_index(),e.registers=e.machine.get_registers(),e.memoryView=e.machine.get_memory_view(e.memoryViewStart,e.memoryViewLen).buffer}switch(console.log("dispatch action "+JSON.stringify(t)),t.action){case"reload":n();break;case"step":{if(e.activeIndex>=e.instructions.length)break;let t=e.machine.exec(e.instructions[e.activeIndex]);if(n(),void 0!==t){let n=t.a1;switch(t.a0){case 1:e.output+=n.toString();break;case 4:{let t=new Uint8Array(65536),r=!1;for(let i=0;i<64&&!r;i++){let a=e.machine.get_memory_view(n+1024*i,1024);for(let e=0;e<1024;e++)0==a.at(1024*i+e)&&(t.set(a.slice(0,e),1024*i),r=!0);if(r)break;t.set(a,1024*i)}r||console.error("didn't find end of string within 64KiB");for(let n=0;n<t.length&&0!==t.at(n);n++){let r=t.at(n);32<=r&&r<127?e.output+=String.fromCharCode(r):e.output+="\\x"+r.toString(16).padStart(2,"0")}break}case 9:case 10:throw Error("unimplemented");case 11:32<=n&&n<127?e.output+=String.fromCharCode(n):e.output+="\\x"+n.toString(16).padStart(2,"0");case 17:throw Error("unimplemented")}}break}case"reset":e.machine=k.new(1048576),e.output="",n();break;case"updateMemoryView":e.memoryViewStart=t.start,e.memoryViewLen=t.len,e.memoryView=e.machine.get_memory_view(t.start,t.len).buffer;break;default:throw Error("Unknown action: "+t.action)}return console.log("new execution state: "+JSON.stringify(e)),e}let U=C(),V=C();function R(){let e=A(U),t=A(V);return[e,t]}function T(){return(0,s.jsx)(E,{children:(0,s.jsx)(I,{source:"\nmain:\n	li a0 16\n	li a1 100\n	sw a1 0(a0)\n    # load the value of n into a0\n    li a0 2\n\n    # load the value of exp into a1\n    li a1 10\n\n    # call ex3\n    jal ex3\n\n    # prints the output of ex3\n    mv a1 a0\n    li a0 1\n    ecall # Print Result\n\n    # exits the program\n    li a0 17\n    li a1 0\n    ecall\n\nex3:\n    # this function is a recursive pow function\n    # a0 contains the base\n    # a1 contains the power to raise to\n    # the return value should be the result of a0^a1\n    #     where ^ is the exponent operator, not XOR\n    addi sp sp -4\n    sw ra 0(sp)\n\n    # return 1 if a0 == 0\n    beq a1 x0 ex3_zero_case\n\n    # otherwise, return ex3(a0, a1-1) * a0\n    mv t0 a0      # save a0 in t0\n    addi a1 a1 -1 # decrement a1\n    \n    addi sp sp -4\n    sw t0 0(sp)\n    jal ex3       # call ex3(a0, a1-1)\n    lw t0 0(sp)\n    addi sp sp 4\n\n    mul a0 a0 t0  # multiply ex3(a0, a1-1) by t0\n                  # (which contains the value of a0)\n\n    j ex3_end\n\nex3_zero_case:\n    li a0 1\n\nex3_end:\n    lw ra 0(sp)\n    addi sp sp 4\n    ret\n",children:(0,s.jsxs)("div",{className:"debugger",children:[(0,s.jsx)(P,{}),(0,s.jsxs)("div",{className:"registers-and-output-panes",children:[(0,s.jsx)(M,{}),(0,s.jsx)(W,{})]}),(0,s.jsx)(K,{})]})})})}function M(){let[e,t]=R(),n=[];for(let t=0;t<16;t++){let r=t,i=16+t;n.push((0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(L,{index:r,value:e.registers[r]})}),(0,s.jsx)("td",{children:(0,s.jsx)(L,{index:i,value:e.registers[i]})})]},t))}return(0,s.jsxs)("div",{className:"registers-pane",children:[(0,s.jsx)("h2",{children:"Registers"}),(0,s.jsx)("table",{children:(0,s.jsx)("tbody",{children:n})})]})}function L(e){return(0,s.jsxs)("div",{className:"register",children:[(0,s.jsxs)("div",{className:"name",children:["x",e.index," ="]}),(0,s.jsx)("div",{className:"value",children:(0,s.jsx)("input",{type:"text",disabled:!0,value:e.value.toString()})})]})}function W(){return(0,s.jsxs)("div",{className:"output-pane",children:[(0,s.jsx)("h2",{children:"Output"}),(0,s.jsx)("textarea",{disabled:!0})]})}function P(){return(0,s.jsxs)("div",{className:"execution-pane",children:[(0,s.jsx)("h2",{children:"Execution"}),(0,s.jsx)(F,{}),(0,s.jsx)(H,{})]})}function H(){let[e,t]=R(),n=[];for(let t=0;t<e.instructions.length;t++){let r=e.instructions[t],i=e.instructionTexts[t],a=z(r);n.push((0,s.jsx)(B,{text:i,hex:a,active:e.activeIndex==t},t))}return(0,s.jsxs)("table",{className:"instruction-list",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{width:"10%"},children:"Break"}),(0,s.jsx)("td",{children:"Instruction"}),(0,s.jsx)("td",{children:"Hex"})]})}),(0,s.jsx)("tbody",{children:n})]})}function B(e){let[t,n]=(0,o.useState)(!1),r=e.active?"instruction on":"instruction";return(0,s.jsxs)("tr",{className:r,children:[(0,s.jsx)("td",{children:(0,s.jsx)(D,{broken:t,onClick:function(){n(!t)}})}),(0,s.jsx)("td",{className:"inst-text",children:e.text}),(0,s.jsx)("td",{className:"inst-hex",children:e.hex})]})}function D(e){let t=e.broken?"breakpoint-mark on":"breakpoint-mark";return(0,s.jsx)("button",{className:t,onClick:e.onClick})}async function q(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}function F(){let e;let[t,n]=R(),[r,i]=(0,o.useState)(null);return e=null===r?(0,s.jsx)(J,{name:"Run",onClick:function(){let e=!0;i(()=>()=>{e=!1}),(async()=>{let r=t.activeIndex;for(;r<t.instructions.length&&e;)n({action:"step"}),r=t.machine.get_instruction_index(),await q(10);i(null),n({action:"reload"})})()}}):(0,s.jsx)(J,{name:"Pause",onClick:function(){r(),i(null),n({action:"reload"})}}),(0,s.jsxs)("div",{className:"execution-controls",children:[e,(0,s.jsx)(J,{name:"Step",onClick:()=>{n({action:"step"})}}),(0,s.jsx)(J,{name:"Reset",onClick:()=>{n({action:"reset"})}})]})}function J(e){return(0,s.jsx)("button",{className:"rounded-md m-2 p-2 bg-sky-300 hover:bg-sky-500",onClick:e.onClick,children:e.name})}function z(e){return"0x"+e.toString(16).padStart(8,"0")}function K(){let[e,t]=R(),[n,r]=(0,o.useState)("0x00000000"),i=function(e,t,n){let r,i;switch(n){case a.Hex:r=e=>"0x"+e.toString(16).padStart(2*t,"0");break;case a.Signed:r=e=>e.toString();break;case a.Unsigned:r=e=>e.toString();break;case a.Ascii:r=e=>32<=e&&e<127?String.fromCharCode(e):"\\x"+e.toString(16).padStart(2,"0")}switch(t){case 1:i=n==a.Signed?new Int8Array(e):new Uint8Array(e);break;case 2:i=n==a.Signed?new Int16Array(e):new Uint16Array(e);break;case 4:i=n==a.Signed?new Int32Array(e):new Uint32Array(e);break;default:throw Error("unexpected cellStride "+t)}return Array.from(i).map(r)}(e.memoryView,4,a.Hex),c=[];for(let t=0;t<16;t++){let n=[],r=e.memoryViewStart+16*t;n.push((0,s.jsx)("td",{children:(0,s.jsxs)("span",{children:[z(r),": "]})},-1));for(let e=0;e<4;e++)n.push((0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"memory-cell",children:i[4*t+e]})},e));c.push((0,s.jsx)("tr",{children:n},t))}return(0,s.jsxs)("div",{className:"memory-pane",children:[(0,s.jsx)("h2",{children:"Memory"}),(0,s.jsx)("input",{type:"text",onChange:function(e){r(e.target.value);let n=function(e){let t=Number.parseInt(e);return Number.isNaN(t)?null:t}(e.target.value);if(null!==n){let e=Math.min(n-n%16,1048576);t({action:"updateMemoryView",start:e,len:Math.min(256,1048576-e)})}},value:n}),(0,s.jsx)("table",{children:(0,s.jsx)("tbody",{children:c})})]})}(i=a||(a={}))[i.Hex=0]="Hex",i[i.Signed=1]="Signed",i[i.Unsigned=2]="Unsigned",i[i.Ascii=3]="Ascii"}},function(e){e.O(0,[736,667,139,744],function(){return e(e.s=8523)}),_N_E=e.O()}]);